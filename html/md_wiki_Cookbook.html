<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Y.A.R.S.: Cookbook</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Y.A.R.S.
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Yet Another RPG System</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_wiki_Cookbook.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Cookbook </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Here you will find examples and explanations of how to use <code>Y.A.R.S.</code> to accomplish RPG-ish things that:</p><ul>
<li>demonstrate best practices</li>
<li>may not be obvious</li>
</ul>
<h1><a class="anchor" id="autotoc_md0"></a>
Damage Over Time [DOT]</h1>
<p>blah blah Affect blah blah</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Only some items are equippable</h1>
<p>more blah blah</p>
<h1><a class="anchor" id="autotoc_md2"></a>
How to create a backpack or bag</h1>
<p>do the magic</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Insta-Kill Affect</h1>
<p>There is an NPC that has a vial of poison in them that will go off in 24 hours. The Player has the option to disable the timer to give the NPC time to extract the poison. How can I do this with Affects?</p>
<p>First, set up the Affect, Item, and Skill.</p>
<div class="fragment"><div class="line">yars.skillAdd(&quot;Vial_of_Poison_Trigger&quot;,</div>
<div class="line">{       .level =</div>
<div class="line">        {       .value      = 200 // Set the level here so we don&#39;t have</div>
<div class="line">        ,       .value_base = 200 // to worry about it in the Character.</div>
<div class="line">        }</div>
<div class="line">});</div>
<div class="line">yars.itemAdd(&quot;Vial of Poison&quot;,</div>
<div class="line">{       .skill_attacker = { &quot;Vial_of_Poison_Trigger&quot; }</div>
<div class="line">,       .affect_health_current = Yars::Health_Max;</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">Yars::Id poison_affect = yars.affectCreate();</div>
</div><!-- fragment --><p>If it is poison, why is the current health being added to? You will see soon enough.</p>
<p>Next, create the NPC with all the stuff.</p>
<div class="fragment"><div class="line">Yars::Id npc = yars.characterCreate();</div>
<div class="line">yars.characterDataSet(npc, &quot;Time Left&quot;, int32_t(24 * 60)); // Time in minutes</div>
<div class="line">yars.characterSkillAdd(npc, &quot;Vial_of_Poison_Trigger&quot;);</div>
<div class="line">yars.characterItemAdd(npc, &quot;Vial_of_Poison&quot;);</div>
</div><!-- fragment --><p>Setup the Affect.</p>
<div class="fragment"><div class="line">yars.affectInit(npc, poison_affect</div>
<div class="line">        , &quot;Vial_of_Poison&quot;         // The Item</div>
<div class="line">        , &quot;Vial_of_Poison_Trigger&quot; // The Skill</div>
<div class="line">        , -100                     // Ensure successful initialization</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">yars.characterAffectApply(npc, poison_affect)</div>
</div><!-- fragment --><p>At this point, the NPC has the Vial of Poison and the poison Affect has been applied. Plus the npc knows how much time is left as long as the "Time Left" data is updated.</p>
<p>Back to "How does this poison work?". If the Player is successful in disabling the timer, the Affect can be <em>removed</em>.</p>
<div class="fragment"><div class="line">// The Player Did It! NPC is saved!</div>
<div class="line">yars.characterAffectRemove(npc, poison_affect);</div>
</div><!-- fragment --><p>When the poison timer triggers, it will <em>revert</em> the Affect. When an Affect is removed, then all the bonus are deducted from the current values. This means when the <code>poison_affect</code> Affect is reverted, Yars::Health_Max will be subtracted from the NPC, killing them.</p>
<div class="fragment"><div class="line">int32_t time_left = 24;</div>
<div class="line">yars.characterDataGet(&quot;Time Left&quot;, time_left);</div>
<div class="line">if(time_left == 0)</div>
<div class="line">{</div>
<div class="line">        // If the Affect is present, revert it to kill the npc.</div>
<div class="line">        // If the Affect was removed, ignore the error.</div>
<div class="line">        yars.characterAffectRevert(npc, poison_affect);</div>
<div class="line">}</div>
</div><!-- fragment --><p>And finally, you should seek help for coming up with such a sick idea... </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
